<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rublocks</title>
    <link rel="stylesheet" href="style.css">
    <!-- Three.js (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è 3D) -->
    <script type="importmap">
      { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>
</head>
<body>

    <!-- –ò–ì–†–û–í–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div id="gameContainer">
        <div id="gameUI">
            <button id="exitGameBtn">–í–´–•–û–î</button>
            <div id="joystickZone"><div id="joystickKnob"></div></div>
            <div id="jumpBtn">JUMP</div>
        </div>
    </div>

    <!-- –ú–ï–ù–Æ: –®–ê–ü–ö–ê -->
    <header class="top-bar">
        <div class="user-info">
            <div class="avatar-circle"><img src="" id="myAvatar"></div>
            <div class="user-text">
                <h2 id="myUsername">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <span class="user-id-tag" id="myUserId">@...</span>
            </div>
        </div>
        <div class="notification-box" id="notifBtn">
            <span class="bell-icon">üîî</span><span class="badge" id="notifBadge" style="display:none">0</span>
            <div class="notif-dropdown" id="notifDropdown"><p class="empty-msg">–ù–µ—Ç –∑–∞—è–≤–æ–∫</p></div>
        </div>
    </header>

    <!-- –ú–ï–ù–Æ: –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô -->
    <section class="connections-section">
        <h3>Connections</h3>
        <div class="connections-list">
            <div class="friend-card add-card" id="openSearchBtn"><div class="plus-icon">+</div><span>–ü–æ–∏—Å–∫</span></div>
            <div id="friendsContainer" style="display:flex; gap:10px;"></div>
        </div>
    </section>

    <!-- –ù–ò–ñ–ù–ò–ï –ö–ù–û–ü–ö–ò -->
    <div class="bottom-menu-container">
        <button class="fab-btn" id="chatFabBtn">üí¨</button>
        <div class="more-menu-popup" id="moreMenuPopup">
            <button class="menu-item-btn" id="openSettingsBtn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="menu-item-btn" id="logoutBtn" style="color:#ff5555;">üö™ –í—ã–π—Ç–∏</button>
        </div>
        <button class="fab-btn" id="moreBtn">‚Ä¢‚Ä¢‚Ä¢</button>
    </div>

    <!-- –û–ö–ù–ê (–ü–æ–∏—Å–∫, –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ò–≥—Ä—ã) -->
    <div id="searchModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h3>–ü–æ–∏—Å–∫</h3><button id="closeSearch">‚úï</button></div>
            <div class="search-bar"><input type="text" id="searchInput" placeholder="–ù–∏–∫..."><button id="searchActionBtn">Go</button></div>
            <div id="searchResults" class="players-list"></div>
        </div>
    </div>

    <div id="settingsModal" class="modal hidden">
        <div class="modal-content settings-content">
            <div class="modal-header"><h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3><button id="closeSettings">‚úï</button></div>
            <div class="settings-body">
                <div class="setting-group"><label>–ù–∏–∫–Ω–µ–π–º</label><div class="row"><input type="text" id="editNickInput"><button id="saveNickBtn">OK</button></div></div>
                <div class="setting-group"><button id="verifyEmailBtn" class="verify-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ—á—Ç—É</button></div>
            </div>
        </div>
    </div>

    <div id="gameSelectorModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h3>Games</h3><button id="closeGameSel">‚úï</button></div>
            <div style="display:grid; grid-template-columns:1fr; gap:10px;">
                <div class="game-card" id="startPizzaGame">
                    <img src="https://cdn-icons-png.flaticon.com/512/3132/3132693.png" style="width:50px;">
                    <h4>Work at a Pizza Place</h4>
                    <p style="font-size:12px; color:#888;">Remastered Map</p>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="menu.js"></script>
</body>
</html>