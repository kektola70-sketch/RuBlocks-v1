<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rublocks</title>
    <link rel="stylesheet" href="style.css">
    <!-- Three.js (–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è 3D) -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
      }
    </script>
</head>
<body>

    <!-- –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù (–°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
    <div id="gameContainer">
        <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–µ—Ä—Ö –∏–≥—Ä—ã -->
        <div id="gameUI">
            <button id="exitGameBtn">–í–´–•–û–î</button>
            
            <!-- –î–∂–æ–π—Å—Ç–∏–∫ -->
            <div id="joystickZone">
                <div id="joystickKnob"></div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –ü—Ä—ã–∂–∫–∞ -->
            <div id="jumpBtn">JUMP</div>
        </div>
    </div>

    <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    
    <!-- –®–∞–ø–∫–∞ -->
    <header class="top-bar">
        <div class="user-info">
            <div class="avatar-circle">
                <img src="" id="myAvatar" alt="Avatar">
            </div>
            <div class="user-text">
                <div style="display: flex; align-items: center; gap: 5px;">
                    <h2 id="myUsername">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                    <span id="verifiedBadge" class="verified-icon" style="display:none;">‚úî</span>
                </div>
                <span class="user-id-tag" id="myUserId">@...</span>
            </div>
        </div>

        <div style="display:flex; align-items:center;">
            <div class="notification-box" id="notifBtn">
                <span class="bell-icon">üîî</span>
                <span class="badge" id="notifBadge" style="display:none">0</span>
                <div class="notif-dropdown" id="notifDropdown">
                    <p class="empty-msg">–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫</p>
                </div>
            </div>
        </div>
    </header>

    <!-- –°–ø–∏—Å–æ–∫ –î—Ä—É–∑–µ–π -->
    <section class="connections-section">
        <h3>Connections</h3>
        <div class="connections-list">
            <div class="friend-card add-card" id="openSearchBtn">
                <div class="plus-icon">+</div>
                <span>–ü–æ–∏—Å–∫</span>
            </div>
            <div id="friendsContainer" style="display:flex; gap:10px;"></div>
        </div>
    </section>

    <!-- –ù–∏–∂–Ω–µ–µ –ú–µ–Ω—é (FAB) -->
    <div class="bottom-menu-container">
        <!-- –ö–Ω–æ–ø–∫–∞ –ß–∞—Ç–∞ -->
        <button class="fab-btn" id="chatFabBtn">üí¨</button>

        <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é -->
        <div class="more-menu-popup" id="moreMenuPopup">
            <button class="menu-item-btn" id="openSettingsBtn">
                <span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
            <button class="menu-item-btn" id="logoutBtn" style="color: #ff5555;">
                <span>üö™</span> –í—ã–π—Ç–∏
            </button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¢—Ä–∏ –¢–æ—á–∫–∏ -->
        <button class="fab-btn" id="moreBtn">‚Ä¢‚Ä¢‚Ä¢</button>
    </div>


    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->

    <!-- 1. –ü–æ–∏—Å–∫ -->
    <div id="searchModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤</h3>
                <button id="closeSearch">‚úï</button>
            </div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫...">
                <button id="searchActionBtn">–ù–∞–π—Ç–∏</button>
            </div>
            <div class="players-list" id="searchResults"></div>
        </div>
    </div>

    <!-- 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content settings-content">
            <div class="modal-header">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button id="closeSettings">‚úï</button>
            </div>
            <div class="settings-body">
                <div class="setting-group">
                    <label>–ù–∏–∫–Ω–µ–π–º</label>
                    <div class="row">
                        <input type="text" id="editNickInput" placeholder="–ù–æ–≤—ã–π –Ω–∏–∫">
                        <button id="saveNickBtn">OK</button>
                    </div>
                </div>
                <div class="setting-group">
                    <button id="verifyEmailBtn" class="verify-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ—á—Ç—É</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. –í—ã–±–æ—Ä –ò–≥—Ä—ã (Game Selector) -->
    <div id="gameSelectorModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í—ã–±—Ä–∞—Ç—å –ü–ª–µ–π—Å</h3>
                <button id="closeGameSel">‚úï</button>
            </div>
            
            <div class="game-grid" style="display: grid; grid-template-columns: 1fr; gap: 15px;">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ü–∏—Ü—Ü–µ—Ä–∏–∏ -->
                <div class="game-card" id="startPizzaGame">
                    <img src="https://cdn-icons-png.flaticon.com/512/3132/3132693.png" style="width: 50px; margin-bottom: 10px;">
                    <h4>Work at a Pizza Place</h4>
                    <p style="font-size: 12px; color: #888;">Remastered Map</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script type="module" src="menu.js"></script>
    <script type="module" src="game_pizza.js"></script>
</body>
</html>