<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rublocks</title>
    <link rel="stylesheet" href="style.css">
    <!-- Three.js -->
    <script type="importmap">
      { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>
</head>
<body>

    <!-- –ò–ì–†–û–í–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† (–° –î–∂–æ–π—Å—Ç–∏–∫–æ–º) -->
    <div id="gameContainer">
        <!-- –•–æ–ª—Å—Ç –∏–≥—Ä—ã –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
        <div id="gameUI">
            <button id="exitGameBtn">–í–´–•–û–î</button>
            <div id="joystickZone"><div id="joystickKnob"></div></div>
            <div id="jumpBtn">JUMP</div>
        </div>
    </div>

    <!-- –ú–ï–ù–Æ: –®–ê–ü–ö–ê -->
    <header class="top-bar">
        <div class="user-info">
            <div class="avatar-circle"><img src="" id="myAvatar"></div>
            <div class="user-text">
                <h2 id="myUsername">...</h2>
                <span class="user-id-tag" id="myUserId">@loading</span>
            </div>
        </div>
        <!-- –ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫ (–£–ø—Ä–æ—â–µ–Ω) -->
        <div class="notification-box" id="notifBtn">
            <span class="bell-icon">üîî</span><span class="badge" id="notifBadge" style="display:none">0</span>
        </div>
    </header>

    <!-- –ú–ï–ù–Æ: –î–†–£–ó–¨–Ø -->
    <section class="connections-section">
        <h3>Connections</h3>
        <div class="connections-list">
            <div class="friend-card add-card" id="openSearchBtn"><div class="plus-icon">+</div><span>–ü–æ–∏—Å–∫</span></div>
            <div id="friendsContainer" style="display:flex; gap:10px;"></div>
        </div>
    </section>

    <!-- –ú–ï–ù–Æ: –ù–ò–ñ–ù–ò–ï –ö–ù–û–ü–ö–ò (–ò–°–ü–†–ê–í–õ–ï–ù–û) -->
    <div class="bottom-menu-container">
        <!-- –ö–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ -->
        <button class="fab-btn" id="chatFabBtn">üí¨</button>
        
        <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é -->
        <div class="more-menu-popup" id="moreMenuPopup">
            <button class="menu-item-btn" id="openSettingsBtn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="menu-item-btn" id="logoutBtn" style="color:#ff5555;">üö™ –í—ã–π—Ç–∏</button>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –¢—Ä–∏ —Ç–æ—á–∫–∏ -->
        <button class="fab-btn" id="moreBtn">‚Ä¢‚Ä¢‚Ä¢</button>
    </div>

    <!-- –í–´–ë–û–† –ò–ì–†–´ -->
    <div id="gameSelectorModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h3>–í—ã–±—Ä–∞—Ç—å –ü–ª–µ–π—Å</h3><button id="closeGameSel" style="background:none;border:none;color:white;">‚úï</button></div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <div class="game-card" onclick="window.launchGame('pizza')">
                    <img src="https://cdn-icons-png.flaticon.com/512/3132/3132693.png">
                    <h4>–ü–∏—Ü—Ü–µ—Ä–∏—è</h4>
                </div>
                <div class="game-card">
                    <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png">
                    <h4>Obby (–°–∫–æ—Ä–æ)</h4>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–û–ò–°–ö –ò–ì–†–û–ö–û–í -->
    <div id="searchModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h3>–ü–æ–∏—Å–∫</h3><button id="closeSearch" style="background:none;border:none;color:white;">‚úï</button></div>
            <input type="text" id="searchInput" placeholder="–ù–∏–∫..." style="width:100%;padding:10px;background:#444;border:none;color:white;margin-bottom:10px;">
            <button id="searchActionBtn" style="width:100%;padding:10px;background:#00b06f;color:white;border:none;">–ù–∞–π—Ç–∏</button>
            <div id="searchResults" style="margin-top:10px;"></div>
        </div>
    </div>

    <script type="module" src="menu.js"></script>
    <script type="module" src="game_pizza.js"></script>
</body>
</html>