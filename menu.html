<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rublocks</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- –®–ê–ü–ö–ê -->
    <header class="top-bar">
        <div class="user-info">
            <div class="avatar-circle"><img src="" id="myAvatar" alt="Avatar"></div>
            <div class="user-text">
                <div style="display: flex; align-items: center; gap: 5px;">
                    <h2 id="myUsername">...</h2><span id="verifiedBadge" class="verified-icon" style="display:none;">‚úî</span>
                </div>
                <span class="user-id-tag" id="myUserId">@loading</span>
            </div>
        </div>
        <div style="display:flex; align-items:center;">
            <div class="notification-box" id="notifBtn">
                <span class="bell-icon">üîî</span><span class="badge" id="notifBadge">0</span>
                <div class="notif-dropdown" id="notifDropdown"><p class="empty-msg" id="lblNoReq">–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫</p></div>
            </div>
        </div>
    </header>

    <!-- –î–†–£–ó–¨–Ø -->
    <section class="connections-section">
        <h3 id="lblConnections">Connections</h3>
        <div class="connections-list">
            <div class="friend-card add-card" id="openSearchBtn"><div class="plus-icon">+</div><span id="lblSearch">–ü–æ–∏—Å–∫</span></div>
            <div id="friendsContainer" style="display:flex; gap:10px;"></div>
        </div>
    </section>

    <!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
    <div class="bottom-menu-container">
        <button class="fab-btn" id="chatFabBtn">üí¨</button>
        <div class="more-menu-popup" id="moreMenuPopup">
            <button class="menu-item-btn" id="openSettingsBtn"><span>‚öôÔ∏è</span> <span id="lblSettings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></button>
            <button class="menu-item-btn" id="logoutBtn" style="color: #ff5555;"><span>üö™</span> <span id="lblLogout">–í—ã–π—Ç–∏</span></button>
        </div>
        <button class="fab-btn" id="moreBtn">‚Ä¢‚Ä¢‚Ä¢</button>
    </div>

    <!-- === –≠–ö–†–ê–ù–´ –ß–ê–¢–ê === -->
    <div id="chatListModal" class="chat-screen hidden" style="display:none;">
        <div class="chat-header">
            <h3>Chats</h3>
            <div style="display:flex; gap:10px;">
                <button id="newChatBtn" class="small-btn" style="background:#00b06f;">New</button>
                <button id="createGroupBtn" class="small-btn">Group</button>
                <button id="closeChatListBtn" style="background:none; border:none; color:white; font-size:24px;">‚úï</button>
            </div>
        </div>
        <div class="chat-list" id="chatListContainer"></div>
    </div>

    <div id="chatRoomModal" class="chat-screen hidden" style="display:none;">
        <div class="chat-header">
            <div style="display:flex; align-items:center; gap:10px;">
                <button id="backToChatList" style="background:none; border:none; color:white; font-size:20px;">‚¨Ö</button>
                <div id="chatRoomTitle" style="font-weight:bold;">Name</div>
            </div>
            <button id="callActionBtn" class="call-btn">üìû Call</button>
        </div>
        <div class="message-area" id="messagesContainer"></div>
        <div class="message-input-area">
            <input type="text" id="messageInput" placeholder="Message...">
            <button class="send-btn" id="sendMessageBtn">‚û§</button>
        </div>
    </div>

    <!-- === –≠–ö–†–ê–ù –í–•–û–î–Ø–©–ï–ì–û –ó–í–û–ù–ö–ê === -->
    <div id="incomingCallOverlay" class="call-overlay hidden" style="display:none;">
        <img src="" id="callerAvatar" class="caller-avatar">
        <h2 id="callerName">User</h2>
        <p id="callStatusText">Incoming Call...</p>
        <div class="call-actions">
            <button id="answerCallBtn" class="btn-call btn-answer">üìû</button>
            <button id="rejectCallBtn" class="btn-call btn-hangup">‚úñ</button>
        </div>
    </div>

    <!-- === –í–´–ë–û–† –ò–ì–†–´ (Game Selector) === -->
    <div id="gameSelectorOverlay" class="game-selector-overlay hidden" style="display:none;">
        <div class="chat-header">
            <h3>Select Game</h3>
            <button id="closeGameSelector" style="background:none; border:none; color:white; font-size:24px;">‚úï</button>
        </div>
        <div class="game-grid">
            <div class="game-card" data-game="Parkour">
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png">
                <h4>Parkour Obby</h4>
            </div>
            <div class="game-card" data-game="City">
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062652.png">
                <h4>City Tycoon</h4>
            </div>
            <div class="game-card" data-game="Shooter">
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062646.png">
                <h4>Space Shooter</h4>
            </div>
            <div class="game-card" data-game="Race">
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062664.png">
                <h4>Car Race</h4>
            </div>
        </div>
        <div class="play-actions">
            <p id="selectedGameText" style="text-align:center; color:#aaa;">Select a game...</p>
            <button id="playTogetherBtn" class="btn-play-friends" disabled>üéÆ Play with Friend</button>
            <button id="playSoloBtn" class="btn-play-solo">üë§ Play Solo</button>
        </div>
    </div>

    <!-- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–û–î–ê–õ–ö–ò (–ù–æ–≤—ã–π —á–∞—Ç, –ì—Ä—É–ø–ø—ã –∏ —Ç.–¥.) -->
    <div id="newChatModal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Select Friend</h3><button id="closeNewChatModal">‚úï</button></div><div id="newChatFriendsList" style="overflow-y:auto; flex:1;"></div></div></div>
    <div id="createGroupModal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>New Group</h3><button id="closeGroupModal">‚úï</button></div><input type="text" id="groupNameInput" placeholder="Group Name" style="width:100%; padding:10px; margin-bottom:10px; background:#444; border:none; color:white;"><div id="groupFriendsList" style="flex:1; overflow-y:auto;"></div><button id="finishCreateGroupBtn" style="margin-top:10px; padding:10px; background:#00b06f; color:white; border:none; width:100%;">Create</button></div></div>
    <div id="searchModal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3 id="lblSearchTitle">–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤</h3><button id="closeModal">‚úï</button></div><div class="search-bar"><input type="text" id="searchInput" placeholder="Nick..."><button id="searchActionBtn">Go</button></div><div class="players-list" id="searchResults"></div></div></div>
    <div id="settingsModal" class="modal hidden"><div class="modal-content settings-content"><div class="modal-header"><h3 id="lblSettingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3><button id="closeSettings">‚úï</button></div><div class="settings-body"><div class="setting-group"><label id="lblLang">–Ø–∑—ã–∫</label><select id="langSelect"><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="en">English</option></select></div><div class="setting-group"><label id="lblNick">–ù–∏–∫–Ω–µ–π–º</label><div class="row"><input type="text" id="editNickInput"><button id="saveNickBtn">OK</button></div></div><div class="setting-group"><label>ID</label><input type="text" id="readOnlyId" readonly style="color: #888;"></div><div class="setting-group"><label id="lblBirth">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label><div class="row"><input type="date" id="birthDateInput"><button id="saveDateBtn">OK</button></div></div><div class="setting-group" style="margin-top: 20px; border-top: 1px solid #444; padding-top: 10px;"><label id="lblEmailStatus">–°—Ç–∞—Ç—É—Å Email</label><p id="emailStatusText">...</p><button id="verifyEmailBtn" class="verify-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button></div></div></div></div>

    <script type="module" src="menu.js"></script>
</body>
</html>