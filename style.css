* { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; -webkit-tap-highlight-color: transparent; }
body { background-color: #1e1e1e; color: white; margin: 0; overflow: hidden; user-select: none; }

/* --- ШАПКА --- */
.top-bar { position: fixed; top: 0; left: 0; width: 100%; height: 60px; background-color: #252525; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; border-bottom: 1px solid #333; z-index: 100; }
.user-info { display: flex; align-items: center; gap: 10px; }
.avatar-circle { width: 40px; height: 40px; border-radius: 50%; background: #333; overflow: hidden; border: 2px solid #00b06f; }
.avatar-circle img { width: 100%; height: 100%; }
.user-text h2 { margin: 0; font-size: 14px; font-weight: bold; }
.user-id-tag { font-size: 10px; color: #888; }
.verified-icon { color: #00b0ff; font-size: 12px; margin-left: 5px; }

/* --- КНОПКИ УПРАВЛЕНИЯ (FAB) --- */
.bottom-menu-container { position: fixed; bottom: 20px; right: 20px; z-index: 150; display: flex; flex-direction: column; align-items: flex-end; gap: 15px; }
.fab-btn { width: 55px; height: 55px; background-color: #333; border: 2px solid #555; border-radius: 50%; color: white; font-size: 24px; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
.fab-btn:active { transform: scale(0.9); }
#chatFabBtn { background-color: #00b06f; border-color: #008c58; }

.more-menu-popup { background-color: #2d2d2d; border: 1px solid #444; border-radius: 10px; padding: 10px; margin-bottom: 5px; display: none; flex-direction: column; gap: 5px; width: 160px; }
.more-menu-popup.active { display: flex; }
.menu-item-btn { background: transparent; border: none; color: white; padding: 10px; text-align: left; border-radius: 5px; cursor: pointer; display: flex; gap: 10px; font-size: 14px; }

/* --- CONNECTIONS --- */
.connections-section { margin-top: 70px; padding: 15px; }
.connections-list { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; }
.friend-card { min-width: 70px; display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; }
.friend-card img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #333; }
.friend-card span { font-size: 11px; width: 70px; text-align: center; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.add-card .plus-icon { width: 50px; height: 50px; border-radius: 50%; border: 2px dashed #666; display: flex; justify-content: center; align-items: center; font-size: 24px; color: #666; }

/* --- МОБИЛЬНОЕ УПРАВЛЕНИЕ ИГРОЙ --- */
#gameContainer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 600; display: none; }
#gameUI { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 610; }

/* Джойстик */
#joystickZone {
    position: absolute; bottom: 50px; left: 50px; width: 120px; height: 120px;
    background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%; pointer-events: auto; touch-action: none;
}
#joystickKnob {
    position: absolute; top: 50%; left: 50%; width: 50px; height: 50px;
    background: rgba(0, 176, 111, 0.8); border-radius: 50%;
    transform: translate(-50%, -50%); pointer-events: none;
}

/* Кнопка прыжка */
#jumpBtn {
    position: absolute; bottom: 60px; right: 50px; width: 80px; height: 80px;
    background: rgba(255, 255, 255, 0.2); border: 2px solid white;
    border-radius: 50%; pointer-events: auto; display: flex;
    justify-content: center; align-items: center; font-weight: bold; font-size: 14px;
}
#jumpBtn:active { background: rgba(255, 255, 255, 0.5); }

/* Кнопка выхода */
#exitGameBtn {
    position: absolute; top: 20px; right: 20px;
    background: red; color: white; border: none; padding: 10px 20px;
    border-radius: 5px; pointer-events: auto; font-weight: bold;
}

/* --- ОСТАЛЬНОЕ (Модалки, Чат) --- */
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 300; }
.modal.hidden { display: none; }
.modal-content { background: #2d2d2d; width: 90%; max-width: 400px; padding: 20px; border-radius: 15px; display: flex; flex-direction: column; max-height: 80vh; }
.modal-header { display: flex; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 10px; }
.game-card { background: #333; padding: 10px; border-radius: 10px; cursor: pointer; text-align: center; border: 2px solid transparent; }
.game-card.selected { border-color: #00b06f; background: #222; }
.game-card img { width: 100%; border-radius: 5px; }